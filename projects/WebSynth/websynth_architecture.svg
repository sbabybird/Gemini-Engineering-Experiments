<svg xmlns="http://www.w3.org/2000/svg" width="1000" height="700" viewBox="0 0 1000 700">
  <defs>
    <style>
      .bg { fill: #f9f9f9; }
      .group-box { fill: none; stroke: #aaa; stroke-width: 1; stroke-dasharray: 5,5; }
      .box { fill: #fff; stroke: #333; stroke-width: 1.5; rx: 5; }
      .audio-node { fill: #e0f7fa; stroke: #00796b; }
      .ui-element { fill: #fff9c4; stroke: #fbc02d; }
      .control-logic { fill: #fce4ec; stroke: #d81b60; }
      .text { font-family: sans-serif; font-size: 12px; text-anchor: middle; dominant-baseline: central; }
      .title { font-size: 16px; font-weight: bold; }
      .arrow { stroke: #333; stroke-width: 1.5; marker-end: url(#arrowhead); }
      .data-arrow { stroke: #d81b60; stroke-width: 1.5; marker-end: url(#arrowhead-data); stroke-dasharray: 4, 2; }
    </style>
    <marker id="arrowhead" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#333" />
    </marker>
    <marker id="arrowhead-data" viewBox="0 0 10 10" refX="8" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" fill="#d81b60" />
    </marker>
  </defs>

  <rect x="0" y="0" width="1000" height="700" class="bg" />

  <!-- Groups -->
  <rect x="20" y="20" width="300" height="250" class="group-box" />
  <text x="170" y="40" class="title">UI Layer (index.html)</text>

  <rect x="20" y="290" width="300" height="390" class="group-box" />
  <text x="170" y="310" class="title">Control/State (script.js)</text>

  <rect x="350" y="20" width="630" height="660" class="group-box" />
  <text x="665" y="40" class="title">Audio Engine (Web Audio API)</text>

  <!-- UI Elements -->
  <rect x="60" y="70" width="220" height="40" class="box ui-element" />
  <text x="170" y="90" class="text">Keyboard (DOM/Mouse Events)</text>
  <rect x="60" y="120" width="220" height="40" class="box ui-element" />
  <text x="170" y="140" class="text">PC Keyboard (Key Events)</text>
  <rect x="60" y="170" width="220" height="40" class="box ui-element" />
  <text x="170" y="190" class="text">Sliders & Selectors (Input/Change)</text>

  <!-- Control Logic -->
  <rect x="60" y="340" width="220" height="50" class="box control-logic" />
  <text x="170" y="365" class="text">Event Listeners</text>
  <rect x="60" y="430" width="220" height="70" class="box control-logic" />
  <text x="170" y="455" class="text">synthParams Object</text>
  <text x="170" y="475" class="text">(State: Osc, Env, Filter)</text>
  <rect x="60" y="540" width="220" height="50" class="box control-logic" />
  <text x="170" y="565" class="text">Presets Object</text>
  <rect x="60" y="610" width="220" height="50" class="box control-logic" />
  <text x="170" y="635" class="text">activeNotes Object</text>

  <!-- Audio Nodes -->
  <g id="osc-stack">
    <rect x="400" y="70" width="150" height="150" class="box audio-node" />
    <text x="475" y="90" class="text">Oscillator 1</text>
    <text x="475" y="145" class="text">Gain (Volume)</text>
    <text x="475" y="170" class="text">ADSR Envelope</text>
    <text x="475" y="195" class="text">Panner</text>
    <rect x="400" y="240" width="150" height="150" class="box audio-node" />
    <text x="475" y="260" class="text">Oscillator 2</text>
    <text x="475" y="315" class="text">Gain (Volume)</text>
    <text x="475" y="340" class="text">ADSR Envelope</text>
    <text x="475" y="365" class="text">Panner</text>
    <rect x="400" y="410" width="150" height="150" class="box audio-node" />
    <text x="475" y="430" class="text">Oscillator 3</text>
    <text x="475" y="485" class="text">Gain (Volume)</text>
    <text x="475" y="510" class="text">ADSR Envelope</text>
    <text x="475" y="535" class="text">Panner</text>
  </g>

  <rect x="600" y="295" width="150" height="50" class="box audio-node" />
  <text x="675" y="320" class="text">Master Gain</text>

  <rect x="780" y="295" width="150" height="50" class="box audio-node" />
  <text x="855" y="320" class="text">Biquad Filter</text>

  <rect x="780" y="450" width="150" height="50" class="box audio-node" />
  <text x="855" y="475" class="text">Analyser</text>

  <rect x="780" y="580" width="150" height="50" class="box audio-node" />
  <text x="855" y="605" class="text">Destination (Speakers)</text>
  
  <rect x="400" y="580" width="150" height="50" class="box ui-element" />
  <text x="475" y="605" class="text">Oscilloscope (Canvas)</text>

  <!-- Arrows -->
  <!-- UI to Control -->
  <path class="arrow" d="M 170 210 L 170 340" />
  <text x="195" y="270" class="text" fill="#333">User Input</text>

  <!-- Control to Audio -->
  <path class="data-arrow" d="M 280 365 L 380 365" />
  <text x="325" y="355" class="text" fill="#d81b60">play/stopNote()</text>
  <path class="data-arrow" d="M 280 465 L 380 465" />
  <text x="330" y="455" class="text" fill="#d81b60">Update Params</text>
  
  <!-- Audio Signal Flow -->
  <path class="arrow" d="M 550 145 L 600 145 L 600 295" />
  <path class="arrow" d="M 550 320 L 600 320" />
  <path class="arrow" d="M 550 495 L 600 495 L 600 345" />
  <path class="arrow" d="M 750 320 L 780 320" />
  <path class="arrow" d="M 930 320 L 950 320 L 950 450 L 930 450" />
  <path class="arrow" d="M 780 475 L 750 475 L 750 605 L 780 605" />
  <path class="arrow" d="M 930 475 L 950 475 L 950 580 L 930 580" />
  <path class="arrow" d="M 780 490 L 550 490 L 550 605 L 550 605" />
  <text x="855" y="525" class="text" fill="#333">Visualization Data</text>
  
</svg>